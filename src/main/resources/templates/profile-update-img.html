<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" th:href="@{/assets/lib/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/assets/css/profile-update-img.css}">
    <script th:src="@{/assets/lib/bootstrap.js}"></script>
    <script src="https://kit.fontawesome.com/42c6a3cece.js" crossorigin="anonymous"></script>
</head>
<body>
<div>
    <img th:src="@{/images/Netflix_Logo.png}" class="main_logo_img" alt="메인로고이미지">
</div>
<div class="head-box d-flex container">
    <span class="me-auto p-2 d-flex align-items-center" onclick="goToProfileNew(${profileId})">
       <a href="javascript:window.history.back();"> <i class="fa fa-arrow-left"></i></a>
        <span class="tv">프로필 변경<br/>프로필 아이콘을 선택하세요.</span>
    </span>
    <span class="profile-card d-flex align-items-center">
    </span>
</div>

<div class="container-fluid pb-5 bobo" style="margin-left:25%; margin-right:25%;"></div>
<section id="icon-image" class="row p-t-20">
    <h4 class="heading">대표 아이콘</h4>
    <div class="owl-carousel align-items-center">

        <div th:each="profileImg, status : ${imgList}">
            <form action="/profile-update-img/${profileId}" method="post">
            <div class="profile-image-container" th:data-image-id="${profileImg_id}">
                <input type="hidden" name="kduimgurl" th:value="${profileImg.imageUrl}">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button type="submit">
                    <img th:src="@{'/upload/profile_img/' + ${profileImg.profileImgName}}" alt="프로필 이미지" class="profile-img">
                </button>
            </div>

            <div th:if="${status.index % 5 == 4}" class="clearfix"></div>
            </form>

        </div>

    </div>
</section>

<script>

<!--    var selectedImagePath = "/images/icons/plus.PNG"; // 기본 이미지 경로 설정-->

<!--    // 이미지 선택 함수-->
<!--    function selectImage(imagePath) {-->
<!--        var selectedImageElement = document.getElementById('selectedImage');-->
<!--        selectedImageElement.src = imagePath;-->
<!--        selectedImagePath = imagePath;-->

<!--        console.log(selectedImagePath)-->
<!--    }-->

<!--   function goToProfileNew(profileId) {-->
<!--    var profileImageUrlFromDatabase = encodeURIComponent(selectedImagePath);-->
<!--    var url = '/profile/profile-updateform/' + profileId + '?image=' + profileImageUrlFromDatabase;-->


<!--    // 이미지를 선택한 후 서버로 전송하는 요청을 보내는 코드-->
<!--&lt;!&ndash;    var formData = new FormData();&ndash;&gt;-->
<!--&lt;!&ndash;    formData.append('profileImg', document.querySelector('input[name="profileImg"]').files[0]); // Corrected input name&ndash;&gt;-->

<!--&lt;!&ndash;    fetch(url, {&ndash;&gt;-->
<!--&lt;!&ndash;        method: 'POST',&ndash;&gt;-->
<!--&lt;!&ndash;        body: formData&ndash;&gt;-->
<!--&lt;!&ndash;    })&ndash;&gt;-->
<!--&lt;!&ndash;    .then(response => {&ndash;&gt;-->
<!--&lt;!&ndash;        // 서버 응답에 대한 처리 코드 작성&ndash;&gt;-->
<!--&lt;!&ndash;    })&ndash;&gt;-->
<!--&lt;!&ndash;    .catch(error => {&ndash;&gt;-->
<!--&lt;!&ndash;        // 오류 처리 코드 작성&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->

<!--    }-->
</script>

</body>
</html>
